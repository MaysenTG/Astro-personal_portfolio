---
import MainHead from '../components/MainHead.astro';
import Footer from '../components/Footer/index.jsx';
import Nav from '../components/Nav/index.jsx';
import PortfolioPreview from '../components/PortfolioPreview/index.jsx';

const response = await fetch("https://api-ap-southeast-2.graphcms.com/v2/cl2wglc9d1y0s01yw6cx0fc4n/master",
	{
		method: 'POST',
		headers: { 'Content-Type': 'application/json' },
		body: JSON.stringify({
			query: `
			query MyQuery {
				projects(where: {projectType: "website"}) {
					id
					skills
					title
					description
					githubUrl
					previewUrl
					projectImage {
						url
					}
				}
			}
      `
		})
	})

const json = await response.json();
const myprojects = json.data["projects"];
---

<html lang="en">

<head>
	<MainHead title="All Projects | Jeanine White" description="Learn about Jenine White's most recent projects" />
	<style lang="scss">
		.grid {
			display: grid;
			grid-gap: 3rem;
			grid-template-columns: 1fr 1fr;
		}
		
		@media screen and (max-width: 768px) {
			.grid {
				grid-template-columns: 1fr;
			}
		}
	</style>
</head>

<body>
	<Nav />
	<div class="wrapper">
		<h1 class="title mt4 mb4">All Projects</h1>
		<div class="grid">
			{myprojects.map((project) =>
			<PortfolioPreview project={project} />)}
		</div>
	</div>
	<Footer />
</body>

</html>